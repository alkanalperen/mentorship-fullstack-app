"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("react"),r=(e=t)&&"object"==typeof e&&"default"in e?e.default:e;!function(e,t){void 0===t&&(t={});var r=t.insertAt;if("undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===r&&n.firstChild?n.insertBefore(a,n.firstChild):n.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}(".rmsc{--rmsc-main:#4285f4;--rmsc-hover:#f1f3f5;--rmsc-selected:#e2e6ea;--rmsc-border:#ccc;--rmsc-gray:#aaa;--rmsc-bg:#fff;--rmsc-p:10px;--rmsc-radius:4px;--rmsc-h:38px}.rmsc *{box-sizing:border-box;transition:all .2s ease}.rmsc .gray{color:var(--rmsc-gray)}.rmsc .dropdown-content{position:absolute;z-index:1;top:100%;width:100%;padding-top:8px}.rmsc .dropdown-content .panel-content{overflow:hidden;border-radius:var(--rmsc-radius);background:var(--rmsc-bg);box-shadow:0 0 0 1px rgba(0,0,0,.1),0 4px 11px rgba(0,0,0,.1)}.rmsc .dropdown-container{position:relative;outline:0;background-color:var(--rmsc-bg);border:1px solid var(--rmsc-border);border-radius:var(--rmsc-radius)}.rmsc .dropdown-container[aria-disabled=true]:focus-within{box-shadow:var(--rmsc-gray) 0 0 0 1px;border-color:var(--rmsc-gray)}.rmsc .dropdown-container:focus-within{box-shadow:var(--rmsc-main) 0 0 0 1px;border-color:var(--rmsc-main)}.rmsc .dropdown-heading{position:relative;padding:0 var(--rmsc-p);display:flex;align-items:center;width:100%;height:var(--rmsc-h);cursor:default;outline:0}.rmsc .dropdown-heading .dropdown-heading-value{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex:1}.rmsc .clear-selected-button{cursor:pointer;background:none;border:0;padding:0;display:flex}.rmsc .options{max-height:260px;overflow-y:auto;margin:0;padding-left:0}.rmsc .options li{list-style:none;margin:0}.rmsc .select-item{box-sizing:border-box;cursor:pointer;display:block;padding:var(--rmsc-p);outline:0}.rmsc .select-item:focus,.rmsc .select-item:hover{background:var(--rmsc-hover)}.rmsc .select-item.selected{background:var(--rmsc-selected)}.rmsc .no-options{padding:var(--rmsc-p);text-align:center;color:var(--rmsc-gray)}.rmsc .search{width:100%;position:relative;border-bottom:1px solid var(--rmsc-border)}.rmsc .search input{height:var(--rmsc-h);padding:0 var(--rmsc-p);width:100%;outline:0;border:0}.rmsc .search-clear-button{cursor:pointer;position:absolute;top:0;right:0;bottom:0;background:none;border:0;padding:0 calc(var(--rmsc-p)/2)}.rmsc .search-clear-button [hidden]{display:none}.rmsc .item-renderer{display:flex;align-items:baseline}.rmsc .item-renderer input{margin:0 5px 0 0}.rmsc .item-renderer.disabled{opacity:.5}.rmsc .spinner{animation:rotate 2s linear infinite}.rmsc .spinner .path{stroke:var(--rmsc-border);stroke-width:4px;stroke-linecap:round;animation:dash 1.5s ease-in-out infinite}@keyframes rotate{to{transform:rotate(1turn)}}@keyframes dash{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}to{stroke-dasharray:90,150;stroke-dashoffset:-124}}");const n={allItemsAreSelected:"All items are selected.",clearSearch:"Clear Search",clearSelected:"Clear Selected",noOptions:"No options",search:"Search",selectAll:"Select All",selectSomeItems:"Select...",create:"Create"},a={value:[],hasSelectAll:!0,className:"multi-select",debounceDuration:200,options:[]},l=r.createContext({}),o=({props:e,children:o})=>{const[s,c]=t.useState(e.options);return t.useEffect(()=>{c(e.options)},[e.options]),r.createElement(l.Provider,{value:{t:t=>{var r;return(null==(r=e.overrideStrings)?void 0:r[t])||n[t]},...a,...e,options:s,setOptions:c}},o)},s=()=>r.useContext(l),c={when:!0,eventTypes:["keydown"]};function i(e,r,n){const a=t.useMemo(()=>Array.isArray(e)?e:[e],[e]),l=Object.assign({},c,n),{when:o,eventTypes:s}=l,i=t.useRef(r);let{target:d}=l;t.useEffect(()=>{i.current=r});const u=t.useCallback(e=>{a.some(t=>e.key===t||e.code===t)&&i.current(e)},[a]);t.useEffect(()=>{if(o&&"undefined"!=typeof window){const e=d?d.current:window;return s.forEach(t=>{e&&e.addEventListener(t,u)}),()=>{s.forEach(t=>{e&&e.removeEventListener(t,u)})}}},[o,s,a,d,r])}const d={ARROW_DOWN:"ArrowDown",ARROW_UP:"ArrowUp",ENTER:"Enter",ESCAPE:"Escape",SPACE:"Space"};function u(e,t){const r=e.length,n=t.length,a=[];if(!r||!n)return 0;if(r<n&&([e,t]=[t,e]),-1!==e.indexOf(t))return n+1/r;for(let e=0;e<=r;++e)a[e]=[0];for(let e=0;e<=n;++e)a[0][e]=0;for(let l=1;l<=r;++l)for(let r=1;r<=n;++r)a[l][r]=e[l-1]===t[r-1]?1+a[l-1][r-1]:Math.max(a[l][r-1],a[l-1][r]);return a[r][n]}function m(e,t){if(!e)return"";if(e=e.toUpperCase().replace(/((?=[^\u00E0-\u00FC])\W)|_/g,""),!t)return e;const r=t;return Object.keys(r).reduce((e,t)=>{const n=new RegExp(t,"g");return e.replace(n,r[t])},e)}const p=()=>r.createElement("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"dropdown-search-clear-icon gray"},r.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),r.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),h=({checked:e,option:t,onClick:n,disabled:a})=>r.createElement("div",{className:"item-renderer "+(a&&"disabled")},r.createElement("input",{type:"checkbox",onChange:n,checked:e,tabIndex:-1,disabled:a}),r.createElement("span",null,t.label)),f=({itemRenderer:e=h,option:n,checked:a,tabIndex:l,disabled:o,onSelectionChanged:s,onClick:c})=>{const u=t.useRef(),m=()=>{o||s(!a)};return i([d.ENTER,d.SPACE],e=>{m(),e.preventDefault()},{target:u}),r.createElement("label",{className:"select-item "+(a&&"selected"),role:"option","aria-selected":a,tabIndex:l,ref:u},r.createElement(e,{option:n,checked:a,onClick:e=>{m(),c(e)},disabled:o}))},b=({options:e,onClick:t,skipIndex:n})=>{const{disabled:a,value:l,onChange:o,ItemRenderer:c}=s();return r.createElement(r.Fragment,null,e.map((e,s)=>{const i=s+n;return r.createElement("li",{key:(null==e?void 0:e.key)||s},r.createElement(f,{tabIndex:i,option:e,onSelectionChanged:t=>{return r=e,void(a||o(t?[...l,r]:l.filter(e=>e.value!==r.value)));var r},checked:!!l.find(t=>t.value===e.value),onClick:e=>t(e,i),itemRenderer:c,disabled:e.disabled||a}))}))};var v;!function(e){e[e.SEARCH=0]="SEARCH",e[e.NONE=-1]="NONE"}(v||(v={}));const g=()=>{const{t:e,onChange:n,options:a,setOptions:l,value:o,filterOptions:c,selectAllLabel:h,ItemRenderer:g,disabled:E,disableSearch:x,hasSelectAll:y,ClearIcon:w,debounceDuration:k,isCreatable:C,onCreateOption:S}=s(),N=t.useRef(),R=t.useRef(),[A,O]=t.useState(""),[I,P]=t.useState(a),[T,W]=t.useState(""),[_,M]=t.useState(0),D=t.useCallback(((e,t)=>{let r;return function(...n){clearTimeout(r),r=setTimeout(()=>{e.apply(null,n)},t)}})(e=>W(e),k),[]),L=t.useMemo(()=>{let e=0;return x||(e+=1),y&&(e+=1),e},[x,y]),j={label:h||e("selectAll"),value:""},B=()=>{var e;W(""),O(""),null==R||null==(e=R.current)||e.focus()},H=e=>M(e);i([d.ARROW_DOWN,d.ARROW_UP],e=>{switch(e.code){case d.ARROW_UP:U(-1);break;case d.ARROW_DOWN:U(1);break;default:return}e.stopPropagation(),e.preventDefault()},{target:N});const U=e=>{let t=_+e;t=Math.max(0,t),t=Math.min(t,a.length+Math.max(L-1,0)),M(t)};t.useEffect(()=>{var e,t;null==N||null==(e=N.current)||null==(t=e.querySelector(`[tabIndex='${_}']`))||t.focus()},[_]);const[z,F]=t.useMemo(()=>{const e=I.filter(e=>!e.disabled);return[e.every(e=>-1!==o.findIndex(t=>t.value===e.value)),0!==e.length]},[I,o]);return t.useEffect(()=>{(async()=>c?await c(a,T):function(e,t,r){if(!t)return e;const n=m(t,void 0);return e.filter(({label:e,value:t})=>null!=e&&null!=t).map(e=>({option:e,score:u(m(e.label,void 0),n)})).filter(e=>e.score>=n.length-2).sort((e,t)=>t.score-e.score).map(e=>e.option)}(a,T))().then(P)},[T,a]),r.createElement("div",{className:"select-panel",role:"listbox",ref:N},!x&&r.createElement("div",{className:"search"},r.createElement("input",{placeholder:e("search"),type:"text","aria-describedby":e("search"),onChange:e=>{D(e.target.value),O(e.target.value),M(v.SEARCH)},onFocus:()=>{M(v.SEARCH)},value:A,ref:R,tabIndex:0}),r.createElement("button",{type:"button",className:"search-clear-button",hidden:!A,onClick:B,"aria-label":e("clearSearch")},w||r.createElement(p,null))),r.createElement("ul",{className:"options"},y&&F&&r.createElement(f,{tabIndex:1===L?0:1,checked:z,option:j,onSelectionChanged:e=>{const t=(e=>{const t=I.filter(e=>!e.disabled).map(e=>e.value);if(e){const e=[...o.map(e=>e.value),...t];return I.filter(t=>e.includes(t.value))}return o.filter(e=>!t.includes(e.value))})(e);n(t)},onClick:()=>H(1),itemRenderer:g,disabled:E}),I.length?r.createElement(b,{skipIndex:L,options:I,onClick:(e,t)=>H(t)}):C?r.createElement("li",{onClick:async()=>{let e={label:A,value:A,__isNew__:!0};S&&(e=await S(A)),l([e,...a]),B(),n([...o,e])},className:"select-item creatable"},e("create"),' "',A,'"'):r.createElement("li",{className:"no-options"},e("noOptions"))))},E=({expanded:e})=>r.createElement("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"dropdown-heading-dropdown-arrow gray"},r.createElement("path",{d:e?"M18 15 12 9 6 15":"M6 9L12 15 18 9"})),x=()=>{const{t:e,value:t,options:n,valueRenderer:a}=s(),l=0===t.length,o=t.length===n.length,c=a&&a(t,n);return l?r.createElement("span",{className:"gray"},c||e("selectSomeItems")):r.createElement("span",null,c||(o?e("allItemsAreSelected"):t.map(e=>e.label).join(", ")))},y=({size:e=24})=>r.createElement("span",{style:{width:e,marginRight:"0.2rem"}},r.createElement("svg",{width:e,height:e,className:"spinner",viewBox:"0 0 50 50",style:{display:"inline",verticalAlign:"middle"}},r.createElement("circle",{cx:"25",cy:"25",r:"20",fill:"none",className:"path"}))),w=()=>{const{t:e,onMenuToggle:n,ArrowRenderer:a,shouldToggleOnHover:l,isLoading:o,disabled:c,onChange:u,labelledBy:m,value:h,isOpen:f,defaultIsOpen:b,ClearSelectedIcon:v}=s(),[w,k]=t.useState(!0),[C,S]=t.useState(b),[N,R]=t.useState(!1),A=a||E,O=t.useRef();!function(e,r){const a=t.useRef(!1);t.useEffect(()=>{a.current?n&&n(C):a.current=!0},r)}(0,[C]),t.useEffect(()=>{void 0===b&&"boolean"==typeof f&&(k(!1),S(f))},[f]),i([d.ENTER,d.ARROW_DOWN,d.SPACE,d.ESCAPE],e=>{var t;["text","button"].includes(e.target.type)&&[d.SPACE,d.ENTER].includes(e.code)||(w&&(e.code===d.ESCAPE?(S(!1),null==O||null==(t=O.current)||t.focus()):S(!0)),e.preventDefault())},{target:O});const I=e=>{w&&l&&S(e)};return r.createElement("div",{tabIndex:0,className:"dropdown-container","aria-labelledby":m,"aria-expanded":C,"aria-readonly":!0,"aria-disabled":c,ref:O,onFocus:()=>!N&&R(!0),onBlur:e=>{!e.currentTarget.contains(e.relatedTarget)&&w&&(R(!1),S(!1))},onMouseEnter:()=>I(!0),onMouseLeave:()=>I(!1)},r.createElement("div",{className:"dropdown-heading",onClick:()=>{w&&S(!o&&!c&&!C)}},r.createElement("div",{className:"dropdown-heading-value"},r.createElement(x,null)),o&&r.createElement(y,null),h.length>0&&r.createElement("button",{type:"button",className:"clear-selected-button",onClick:e=>{e.stopPropagation(),u([]),w&&S(!1)},disabled:c,"aria-label":e("clearSelected")},v||r.createElement(p,null)),r.createElement(A,{expanded:C})),C&&r.createElement("div",{className:"dropdown-content"},r.createElement("div",{className:"panel-content"},r.createElement(g,null))))};exports.Dropdown=w,exports.SelectItem=f,exports.SelectPanel=g,exports.default=e=>r.createElement(o,{props:e},r.createElement("div",{className:"rmsc "+(e.className||"multi-select")},r.createElement(w,null)));
//# sourceMappingURL=react-multi-select-component.cjs.production.min.js.map
